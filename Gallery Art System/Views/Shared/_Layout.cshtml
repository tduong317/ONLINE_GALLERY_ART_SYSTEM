<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Art_Gallery_System</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
          rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="~/css/home/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/cart.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/about.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/artwork.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/exhibition.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/auction.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/detailAuction.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/detailArtwork.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/detailExh.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/profile.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home/checkout.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Art_Gallery_System_FE.styles.css" asp-append-version="true" />
    <link rel="icon" type="image/png" href="~/images/logo.png" />
</head>

<body>
    @await Component.InvokeAsync("Header")
    @RenderBody()
    <div class="container-fluid">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>
    @await Component.InvokeAsync("Footer")
    <script>
                    window.addEventListener('scroll', function () {
            const header = document.getElementById('mainHeader');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });


    </script>

    <!-- JS -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @section Scripts {
        <script>
            // 🛒 Hàm cập nhật số lượng giỏ hàng trên icon
            function refreshCartCount() {
                $.get('/Cart/GetCartCount', function (res) {
                    if (res.count !== undefined) {
                        $('#cartCount').text(res.count);
                    }
                });
            }

            // 🛍️ Hàm thêm sản phẩm vào giỏ
            function addToCart(artworkId) {
                $.post('/Cart/AddToCart', { artworkId: artworkId }, function (res) {
                    if (res.count !== undefined) {
                        $('#cartCount').text(res.count);
                    }
                });
            }

            // 🔄 Gọi khi trang load
            $(document).ready(function () {
                refreshCartCount();
            });
        </script>
    }

    @await RenderSectionAsync("Scripts", required: false)
    <a href="#" id="scrollToTop" class="scroll-to-top" title="Scroll to top"><i class="fa-solid fa-arrow-up"></i></a>
    <script>
        const scrollBtn = document.getElementById('scrollToTop');

        window.addEventListener('scroll', () => {
            scrollBtn.style.display = window.scrollY > 300 ? 'block' : 'none';
        });

        scrollBtn.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
